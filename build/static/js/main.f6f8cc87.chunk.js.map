{"version":3,"sources":["App.js","component/searchbar.js","component/video_detail.js","component/video.js","component/video_list_item.js","container/video_list.js","env/api_env.js","serviceWorker.js","index.js"],"names":["API_KEY","global","key","API_END_POINT","App","props","_this","Object","_var_www_html_movie_search_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_var_www_html_movie_search_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_var_www_html_movie_search_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","currentMovie","movieList","axios","get","concat","then","res","setState","data","results","splice","applyVideoToCurrentMovie","bind","id","youtubeKey","newCurrentMovieState","videoId","movie","setRecommandation","seachText","_this2","_this3","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","_component_searchbar__WEBPACK_IMPORTED_MODULE_8__","callback","onClickSearch","title","_component_video__WEBPACK_IMPORTED_MODULE_11__","_component_video_detail__WEBPACK_IMPORTED_MODULE_10__","description","overview","length","_container_video_list__WEBPACK_IMPORTED_MODULE_9__","onClickListItem","renderVideoList","Component","SearchBar","searchText","placeHolder","intervalBeforeRequest","lockRequest","e","preventDefault","target","value","setTimeout","search","react__WEBPACK_IMPORTED_MODULE_5___default","type","onChange","handleChange","placeholder","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","VideoDetail","_ref","Video","src","VideoListItem","react_default","onClick","params","height","width","poster_path","alt","VideoList","map","video_list_item","receiveCallBack","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f6f8cc87.chunk.js","sourcesContent":["import './style/App.css';\n\n//config\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\n//components\nimport SearchBar from './component/searchbar';\nimport VideoList from './container/video_list';\nimport VideoDetail from './component/video_detail';\nimport Video from './component/video';\n\n//const for API\nimport './env/api_env.js';\nconst API_KEY = global.key;\nconst API_END_POINT = \"https://api.themoviedb.org/3\";   \nconst POPULAR_MOVIE_URL = \"&language=fr&sort_by=popularity.desc&include_adult=false&append_to_response=images\";\n//const SEARCH_MOVIE = \"&language=fr&page=1&include_adult=false\";\n\nclass App extends Component{\n\n    constructor(props){\n        super(props);\n        this.state = { \n            currentMovie: {},\n            movieList: {}\n        }\n    }\n\n    componentDidMount(){\n        axios.get(`${API_END_POINT}/discover/movie${API_KEY}${POPULAR_MOVIE_URL}`)\n            .then(function (res){\n                    this.setState({movieList: res.data.results.splice(1,6) , currentMovie: res.data.results[0]}, function(){\n                    this.applyVideoToCurrentMovie();\n                });\n            }.bind(this)\n        ) \n    }\n\n    applyVideoToCurrentMovie(){\n        axios.get(`${API_END_POINT}/movie/${this.state.currentMovie.id}/videos${API_KEY}`)\n        .then(function (res) {\n            const youtubeKey = res.data.results[0].key; \n            let newCurrentMovieState = this.state.currentMovie;\n            newCurrentMovieState.videoId = youtubeKey; \n            this.setState({currentMovie: newCurrentMovieState});\n        }.bind(this)\n            )\n    }\n\n    onClickListItem(movie){\n        this.setState({currentMovie:movie}, function(){\n            this.applyVideoToCurrentMovie();\n            this.setRecommandation();\n        })\n    }\n\n    onClickSearch(seachText){\n        if(seachText) {\n            axios.get(`${API_END_POINT}/search/movie${API_KEY}&query=${seachText}`)\n                .then(function (res){\n                        if(res.data && res.data.results[0]){\n                            if(res.data.results[0].id !== this.state.currentMovie.id ){\n                                        this.setState({currentMovie: res.data.results[0]}, () =>{\n                                        this.applyVideoToCurrentMovie();\n                                        this.setRecommandation();\n                                    })\n                            }\n                        }\n                    }.bind(this));\n        }\n    }\n\n    setRecommandation(){\n        axios.get(`${API_END_POINT}/movie/${this.state.currentMovie.id}/recommendations${API_KEY}&language=fr`)\n        .then(function (res){\n            this.setState({movieList: res.data.results.splice(0,5)})\n        }.bind(this)\n        ) \n    }\n\n    render(){\n        const renderVideoList = () => {\n            if(this.state.movieList.length >=5){\n                return <VideoList movieList= {this.state.movieList} callback={this.onClickListItem.bind(this)}/>\n            }\n        }\n        return (\n            <section>\n                <div className=\"container padding-50-bottom\">\n                    <nav className=\"navbar navbar-expand\">\n                        <form className=\"collapse navbar-collapse w-100 order-3 dual-collapse1\" id=\"navbarSupportedContent\">\n                            <SearchBar callback={this.onClickSearch.bind(this)}/>\n                        </form>\n                    </nav>\n                </div>\n                <div className=\"container padding-50\">\n                    <h1 className=\"text-center\">{this.state.currentMovie.title}</h1>\n                    <hr />\n                </div>\n                <div className=\"row padding-50-bottom\">\n                    <div className=\"col-md-12 text-center\">\n                        <Video videoId={this.state.currentMovie.videoId}/>\n                    </div>\n                </div>\n                <div className=\"container padding-50\">\n                    <div className=\"row padding-50-bottom\">\n                        <div className=\"col-md-12 text-center\">\n                            <VideoDetail \n                            description = {this.state.currentMovie.overview}/>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"padding-50-bottom\"></div>\n                <div className=\"container\">\n                    <h1 className=\"font-40 text-center\">Suggestions</h1>\n                    <hr />\n                    <div className=\"padding-50-bottom\"></div>\n                    <div className=\"col-md-12\">\n                        {renderVideoList()}\n                    </div>\n                </div>\n            </section>\n        )\n    }\n}\n\nexport default App;\n\n","import React, { Component } from 'react';\n\nclass SearchBar extends Component{\n\n    constructor(props){\n        super(props);\n        this.state = {\n                    searchText: \"\",\n                    placeHolder:\"Rechercher un film...\",\n                    intervalBeforeRequest:1000,\n                    lockRequest: false\n                    }\n    }\n    handleChange(e){  \n            e.preventDefault();  \n            this.setState({searchText: e.target.value});\n\n            if(!this.state.lockRequest){\n                this.setState({lockRequest: true})\n                setTimeout(function(){\n                    this.search()\n                }.bind(this),this.state.intervalBeforeRequest)\n            }\n    }\n\n    search(){\n            this.props.callback(this.state.searchText);\n            this.setState({lockRequest:false})\n\n    }\n\n\n    handleOnClick(e){\n        e.preventDefault();\n        this.search();\n    }\n\n    render(){\n        return(\n            \n            <div className=\"container\">\n                <div className=\"col-md-12 input-group mb-3 text-center\"> \n                    <input type=\"text\" className=\"form-control form-control\" onChange={this.handleChange.bind(this)} placeholder={this.state.placeHolder}/>\n            </div>\n            </div>\n        )\n\n    }\n}\n\nexport default SearchBar;","import React from 'react';\n\nconst VideoDetail = ({title , description}) => {\n    \n    return(\n        <div>\n            <h1 className=\"font-40\">{title}</h1>\n            <p className=\"font-20\">{description}</p>\n        </div>\n    )\n}\n\nexport default VideoDetail;","import React from 'react';\nconst BASE_URL= \"https://www.youtube.com/embed/\";\n\nconst Video = ({videoId}) =>{\n\n    return(\n        <div className=\"embed-responsive embed-responsive-21by9\">\n            <iframe className=\"embed-responsive-item\" src={`${BASE_URL}${videoId}`}/>\n        </div>\n    )\n}\n\nexport default Video;","import React from 'react';\n\nconst VideoListItem = (props) => {\n    const movie = props.movie;\n    const IMG_BASE_URL = \"https://image.tmdb.org/t/p/w500\";\n\n        return(\n            <li className=\"hover-img\" onClick={handleOnClick} >\n                <div className=\"col-md-10\">\n                <figure>\n                    <img className=\"media-object img-rounded\" height=\"300px\" width=\"200px\" src={`${IMG_BASE_URL}${movie.poster_path}`} alt={`${IMG_BASE_URL}${movie.poster_path}`}/>\n                </figure>\n                    <span>{movie.title}</span>\n                </div>\n            </li>\n        )\n        function handleOnClick(params) {\n            props.callback(movie);\n        }\n}\n\nexport default VideoListItem;","import React from 'react';\nimport VideoListItem from '../component/video_list_item';\n\nconst VideoList = (props) => {\n    const movieList = props.movieList;\n        return(\n            <div className=\"col-md-12\">\n                <ul>\n                    {\n                        movieList.map(movie =>{\n                            return <VideoListItem key={movie.id} movie={movie} callback={receiveCallBack}/>\n                        })\n                    }\n                </ul>\n            </div>\n        ); \n\n        function receiveCallBack(movie) {\n            props.callback(movie)\n        }\n    }\n\n\nexport default VideoList;","global.key = \"?api_key=40f49ae6cade911ce82a1033a7beacf4\";","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style/index.css';\nimport App from './App.js';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}